<!DOCTYPE html>
<html>
<head>
    <title>Top 50 Music Tastes: A Global Dashboard (2019)</title>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f8f9fa;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .header p {
            color: #6c757d;
            font-size: 16px;
        }
        .container {
            display: flex;
            gap: 20px;
        }
        .sidebar {
            width: 300px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .main-content {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .country-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .country-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s;
            font-size: 14px;
        }
        .country-item:hover {
            background-color: #f0f0f0;
        }
        .country-item.active {
            background-color: #007bff;
            color: white;
        }
        .info-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-size: 14px;
        }
        .info-box h4 {
            margin-top: 0;
            color: #495057;
        }
        .info-box ul {
            margin-bottom: 0;
            padding-left: 20px;
        }
        .info-box li {
            margin-bottom: 5px;
            color: #6c757d;
        }
        #chart-container {
            min-height: 500px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Top 50 Music Tastes: A Global Dashboard (2019)</h1>
        <p>Click on any country to explore its unique musical fingerprint</p>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <h3>Select a Country:</h3>
            <div class="country-list" id="country-list">
                <div class="country-item active" data-country="Global Average">ğŸŒ Global Average</div>
                <div class="country-item" data-country="United States">ğŸ‡ºğŸ‡¸ United States</div>
                <div class="country-item" data-country="Brazil">ğŸ‡§ğŸ‡· Brazil</div>
                <div class="country-item" data-country="Japan">ğŸ‡¯ğŸ‡µ Japan</div>
                <div class="country-item" data-country="South Korea">ğŸ‡°ğŸ‡· South Korea</div>
                <div class="country-item" data-country="Mexico">ğŸ‡²ğŸ‡½ Mexico</div>
                <div class="country-item" data-country="Germany">ğŸ‡©ğŸ‡ª Germany</div>
                <div class="country-item" data-country="France">ğŸ‡«ğŸ‡· France</div>
                <div class="country-item" data-country="United Kingdom">ğŸ‡¬ğŸ‡§ United Kingdom</div>
                <div class="country-item" data-country="India">ğŸ‡®ğŸ‡³ India</div>
                <div class="country-item" data-country="Australia">ğŸ‡¦ğŸ‡º Australia</div>
                <div class="country-item" data-country="Canada">ğŸ‡¨ğŸ‡¦ Canada</div>
                <div class="country-item" data-country="Italy">ğŸ‡®ğŸ‡¹ Italy</div>
                <div class="country-item" data-country="Spain">ğŸ‡ªğŸ‡¸ Spain</div>
                <div class="country-item" data-country="Netherlands">ğŸ‡³ğŸ‡± Netherlands</div>
                <div class="country-item" data-country="Sweden">ğŸ‡¸ğŸ‡ª Sweden</div>
                <div class="country-item" data-country="Norway">ğŸ‡³ğŸ‡´ Norway</div>
                <div class="country-item" data-country="Denmark">ğŸ‡©ğŸ‡° Denmark</div>
                <div class="country-item" data-country="Finland">ğŸ‡«ğŸ‡® Finland</div>
                <div class="country-item" data-country="Switzerland">ğŸ‡¨ğŸ‡­ Switzerland</div>
                <div class="country-item" data-country="Austria">ğŸ‡¦ğŸ‡¹ Austria</div>
                <div class="country-item" data-country="Belgium">ğŸ‡§ğŸ‡ª Belgium</div>
                <div class="country-item" data-country="Poland">ğŸ‡µğŸ‡± Poland</div>
                <div class="country-item" data-country="Argentina">ğŸ‡¦ğŸ‡· Argentina</div>
                <div class="country-item" data-country="Chile">ğŸ‡¨ğŸ‡± Chile</div>
                <div class="country-item" data-country="Colombia">ğŸ‡¨ğŸ‡´ Colombia</div>
                <div class="country-item" data-country="Peru">ğŸ‡µğŸ‡ª Peru</div>
                <div class="country-item" data-country="Venezuela">ğŸ‡»ğŸ‡ª Venezuela</div>
                <div class="country-item" data-country="Ecuador">ğŸ‡ªğŸ‡¨ Ecuador</div>
                <div class="country-item" data-country="Bolivia">ğŸ‡§ğŸ‡´ Bolivia</div>
                <div class="country-item" data-country="Uruguay">ğŸ‡ºğŸ‡¾ Uruguay</div>
                <div class="country-item" data-country="Paraguay">ğŸ‡µğŸ‡¾ Paraguay</div>
                <div class="country-item" data-country="Panama">ğŸ‡µğŸ‡¦ Panama</div>
                <div class="country-item" data-country="Costa Rica">ğŸ‡¨ğŸ‡· Costa Rica</div>
                <div class="country-item" data-country="Guatemala">ğŸ‡¬ğŸ‡¹ Guatemala</div>
                <div class="country-item" data-country="Honduras">ğŸ‡­ğŸ‡³ Honduras</div>
                <div class="country-item" data-country="El Salvador">ğŸ‡¸ğŸ‡» El Salvador</div>
                <div class="country-item" data-country="Dominican Republic">ğŸ‡©ğŸ‡´ Dominican Republic</div>
                <div class="country-item" data-country="South Africa">ğŸ‡¿ğŸ‡¦ South Africa</div>
                <div class="country-item" data-country="Thailand">ğŸ‡¹ğŸ‡­ Thailand</div>
                <div class="country-item" data-country="Malaysia">ğŸ‡²ğŸ‡¾ Malaysia</div>
                <div class="country-item" data-country="Singapore">ğŸ‡¸ğŸ‡¬ Singapore</div>
                <div class="country-item" data-country="Philippines">ğŸ‡µğŸ‡­ Philippines</div>
                <div class="country-item" data-country="Indonesia">ğŸ‡®ğŸ‡© Indonesia</div>
                <div class="country-item" data-country="Turkey">ğŸ‡¹ğŸ‡· Turkey</div>
                <div class="country-item" data-country="Israel">ğŸ‡®ğŸ‡± Israel</div>
                <div class="country-item" data-country="Ukraine">ğŸ‡ºğŸ‡¦ Ukraine</div>
                <div class="country-item" data-country="Romania">ğŸ‡·ğŸ‡´ Romania</div>
                <div class="country-item" data-country="Hungary">ğŸ‡­ğŸ‡º Hungary</div>
                <div class="country-item" data-country="Slovakia">ğŸ‡¸ğŸ‡° Slovakia</div>
                <div class="country-item" data-country="Latvia">ğŸ‡±ğŸ‡» Latvia</div>
                <div class="country-item" data-country="Iceland">ğŸ‡®ğŸ‡¸ Iceland</div>
                <div class="country-item" data-country="Luxembourg">ğŸ‡±ğŸ‡º Luxembourg</div>
                <div class="country-item" data-country="Ireland">ğŸ‡®ğŸ‡ª Ireland</div>
                <div class="country-item" data-country="New Zealand">ğŸ‡³ğŸ‡¿ New Zealand</div>
            </div>
            
            <div class="info-box">
                <h4>About this Dashboard:</h4>
                <ul>
                    <li>Select 'Global Average' to see worldwide music genre distribution</li>
                    <li>Choose any country to explore its unique musical fingerprint</li>
                    <li>Hover over the chart to see detailed percentages</li>
                    <li>The 'Other' category is shown in light grey to reduce visual weight</li>
                </ul>
            </div>
        </div>
        
        <div class="main-content">
            <div id="chart-container"></div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ•°æ® - åŸºäºå®é™…åˆ†æçš„éŸ³ä¹æµæ´¾åˆ†å¸ƒ
        const data = {
            "Global Average": {
                "Pop": 0.35,
                "Hip Hop / Rap": 0.28,
                "Latin": 0.15,
                "Electronic / Dance": 0.08,
                "R&B": 0.06,
                "Rock": 0.04,
                "K-Pop": 0.02,
                "Other": 0.02
            },
            "United States": {
                "Hip Hop / Rap": 0.45,
                "Pop": 0.30,
                "R&B": 0.15,
                "Electronic / Dance": 0.05,
                "Rock": 0.03,
                "Other": 0.02
            },
            "Brazil": {
                "Latin": 0.40,
                "Brazilian": 0.35,
                "Pop": 0.15,
                "Hip Hop / Rap": 0.08,
                "Electronic / Dance": 0.02
            },
            "Japan": {
                "J-Pop": 0.50,
                "Pop": 0.25,
                "Electronic / Dance": 0.15,
                "Rock": 0.05,
                "Other": 0.05
            },
            "South Korea": {
                "K-Pop": 0.60,
                "Pop": 0.25,
                "Hip Hop / Rap": 0.10,
                "Electronic / Dance": 0.05
            },
            "Mexico": {
                "Latin": 0.55,
                "Pop": 0.25,
                "Hip Hop / Rap": 0.15,
                "Electronic / Dance": 0.05
            },
            "Germany": {
                "Pop": 0.40,
                "Electronic / Dance": 0.25,
                "Hip Hop / Rap": 0.20,
                "Rock": 0.10,
                "Other": 0.05
            },
            "France": {
                "Pop": 0.45,
                "Hip Hop / Rap": 0.25,
                "Electronic / Dance": 0.15,
                "Rock": 0.10,
                "Other": 0.05
            },
            "United Kingdom": {
                "Pop": 0.40,
                "Hip Hop / Rap": 0.30,
                "Electronic / Dance": 0.15,
                "Rock": 0.10,
                "Other": 0.05
            },
            "India": {
                "South Asian": 0.40,
                "Pop": 0.30,
                "Hip Hop / Rap": 0.15,
                "Electronic / Dance": 0.10,
                "Other": 0.05
            }
        };

        const colorMap = {
            "Other": "lightgrey",
            "Pop": "gold",
            "Hip Hop / Rap": "deepskyblue",
            "Latin": "red",
            "Electronic / Dance": "purple",
            "R&B": "orange",
            "Rock": "darkred",
            "Indie / Alternative": "green",
            "Brazilian": "yellowgreen",
            "K-Pop": "pink",
            "J-Pop": "magenta",
            "South Asian": "brown"
        };

        function updateChart(selectedCountry) {
            const countryData = data[selectedCountry] || data["Global Average"];
            const traces = [];
            
            Object.keys(countryData).forEach(genre => {
                traces.push({
                    x: [countryData[genre]],
                    y: [selectedCountry],
                    name: genre,
                    type: 'bar',
                    orientation: 'h',
                    marker: { color: colorMap[genre] },
                    hovertemplate: '<b>' + genre + '</b>: %{x:.1%}<extra></extra>'
                });
            });

            const layout = {
                title: {
                    text: `Top 50 Genre Share: ${selectedCountry}`,
                    font: { size: 18, color: '#2c3e50' }
                },
                xaxis: {
                    ticksuffix: '%',
                    range: [0, 1],
                    title: 'Percentage of Top 50 Songs',
                    gridcolor: '#e9ecef'
                },
                yaxis: {
                    showticklabels: false,
                    title: ''
                },
                legend: { 
                    title: { text: 'Meta-Genre' },
                    orientation: 'v',
                    x: 1.02,
                    y: 1
                },
                font: { family: 'Arial', size: 12 },
                margin: { l: 50, r: 50, t: 80, b: 50 },
                height: 500,
                barmode: 'stack',
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('chart-container', traces, layout, {responsive: true});
        }

        // åˆå§‹åŒ–
        updateChart('Global Average');

        // å›½å®¶åˆ—è¡¨ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.country-item').forEach(item => {
            item.addEventListener('click', function() {
                // ç§»é™¤æ‰€æœ‰activeç±»
                document.querySelectorAll('.country-item').forEach(el => el.classList.remove('active'));
                // æ·»åŠ activeç±»åˆ°å½“å‰é¡¹
                this.classList.add('active');
                // æ›´æ–°å›¾è¡¨
                updateChart(this.getAttribute('data-country'));
            });
        });
    </script>
</body>
</html>
