<!DOCTYPE html>
<html>
<head>
    <title>Top 50 Music Tastes: A Global Dashboard (2019)</title>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f8f9fa;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .header p {
            color: #6c757d;
            font-size: 16px;
        }
        .container {
            display: flex;
            gap: 20px;
        }
        .sidebar {
            width: 300px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .main-content {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .country-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .country-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s;
            font-size: 14px;
        }
        .country-item:hover {
            background-color: #f0f0f0;
        }
        .country-item.active {
            background-color: #007bff;
            color: white;
        }
        .info-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-size: 14px;
        }
        .info-box h4 {
            margin-top: 0;
            color: #495057;
        }
        .info-box ul {
            margin-bottom: 0;
            padding-left: 20px;
        }
        .info-box li {
            margin-bottom: 5px;
            color: #6c757d;
        }
        #chart-container {
            min-height: 500px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Top 50 Music Tastes: A Global Dashboard (2019)</h1>
        <p>Click on any country to explore its unique musical fingerprint</p>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <h3>Select a Country:</h3>
            <div class="country-list" id="country-list">
                <div class="country-item active" data-country="Global Average">🌍 Global Average</div>
                <div class="country-item" data-country="United States">🇺🇸 United States</div>
                <div class="country-item" data-country="Brazil">🇧🇷 Brazil</div>
                <div class="country-item" data-country="Japan">🇯🇵 Japan</div>
                <div class="country-item" data-country="South Korea">🇰🇷 South Korea</div>
                <div class="country-item" data-country="Mexico">🇲🇽 Mexico</div>
                <div class="country-item" data-country="Germany">🇩🇪 Germany</div>
                <div class="country-item" data-country="France">🇫🇷 France</div>
                <div class="country-item" data-country="United Kingdom">🇬🇧 United Kingdom</div>
                <div class="country-item" data-country="India">🇮🇳 India</div>
                <div class="country-item" data-country="Australia">🇦🇺 Australia</div>
                <div class="country-item" data-country="Canada">🇨🇦 Canada</div>
                <div class="country-item" data-country="Italy">🇮🇹 Italy</div>
                <div class="country-item" data-country="Spain">🇪🇸 Spain</div>
                <div class="country-item" data-country="Netherlands">🇳🇱 Netherlands</div>
                <div class="country-item" data-country="Sweden">🇸🇪 Sweden</div>
                <div class="country-item" data-country="Norway">🇳🇴 Norway</div>
                <div class="country-item" data-country="Denmark">🇩🇰 Denmark</div>
                <div class="country-item" data-country="Finland">🇫🇮 Finland</div>
                <div class="country-item" data-country="Switzerland">🇨🇭 Switzerland</div>
                <div class="country-item" data-country="Austria">🇦🇹 Austria</div>
                <div class="country-item" data-country="Belgium">🇧🇪 Belgium</div>
                <div class="country-item" data-country="Poland">🇵🇱 Poland</div>
                <div class="country-item" data-country="Argentina">🇦🇷 Argentina</div>
                <div class="country-item" data-country="Chile">🇨🇱 Chile</div>
                <div class="country-item" data-country="Colombia">🇨🇴 Colombia</div>
                <div class="country-item" data-country="Peru">🇵🇪 Peru</div>
                <div class="country-item" data-country="Venezuela">🇻🇪 Venezuela</div>
                <div class="country-item" data-country="Ecuador">🇪🇨 Ecuador</div>
                <div class="country-item" data-country="Bolivia">🇧🇴 Bolivia</div>
                <div class="country-item" data-country="Uruguay">🇺🇾 Uruguay</div>
                <div class="country-item" data-country="Paraguay">🇵🇾 Paraguay</div>
                <div class="country-item" data-country="Panama">🇵🇦 Panama</div>
                <div class="country-item" data-country="Costa Rica">🇨🇷 Costa Rica</div>
                <div class="country-item" data-country="Guatemala">🇬🇹 Guatemala</div>
                <div class="country-item" data-country="Honduras">🇭🇳 Honduras</div>
                <div class="country-item" data-country="El Salvador">🇸🇻 El Salvador</div>
                <div class="country-item" data-country="Dominican Republic">🇩🇴 Dominican Republic</div>
                <div class="country-item" data-country="South Africa">🇿🇦 South Africa</div>
                <div class="country-item" data-country="Thailand">🇹🇭 Thailand</div>
                <div class="country-item" data-country="Malaysia">🇲🇾 Malaysia</div>
                <div class="country-item" data-country="Singapore">🇸🇬 Singapore</div>
                <div class="country-item" data-country="Philippines">🇵🇭 Philippines</div>
                <div class="country-item" data-country="Indonesia">🇮🇩 Indonesia</div>
                <div class="country-item" data-country="Turkey">🇹🇷 Turkey</div>
                <div class="country-item" data-country="Israel">🇮🇱 Israel</div>
                <div class="country-item" data-country="Ukraine">🇺🇦 Ukraine</div>
                <div class="country-item" data-country="Romania">🇷🇴 Romania</div>
                <div class="country-item" data-country="Hungary">🇭🇺 Hungary</div>
                <div class="country-item" data-country="Slovakia">🇸🇰 Slovakia</div>
                <div class="country-item" data-country="Latvia">🇱🇻 Latvia</div>
                <div class="country-item" data-country="Iceland">🇮🇸 Iceland</div>
                <div class="country-item" data-country="Luxembourg">🇱🇺 Luxembourg</div>
                <div class="country-item" data-country="Ireland">🇮🇪 Ireland</div>
                <div class="country-item" data-country="New Zealand">🇳🇿 New Zealand</div>
            </div>
            
            <div class="info-box">
                <h4>About this Dashboard:</h4>
                <ul>
                    <li>Select 'Global Average' to see worldwide music genre distribution</li>
                    <li>Choose any country to explore its unique musical fingerprint</li>
                    <li>Hover over the chart to see detailed percentages</li>
                    <li>The 'Other' category is shown in light grey to reduce visual weight</li>
                </ul>
            </div>
        </div>
        
        <div class="main-content">
            <div id="chart-container"></div>
        </div>
    </div>

    <script>
        // 模拟数据 - 基于实际分析的音乐流派分布
        const data = {
            "Global Average": {
                "Pop": 0.35,
                "Hip Hop / Rap": 0.28,
                "Latin": 0.15,
                "Electronic / Dance": 0.08,
                "R&B": 0.06,
                "Rock": 0.04,
                "K-Pop": 0.02,
                "Other": 0.02
            },
            "United States": {
                "Hip Hop / Rap": 0.45,
                "Pop": 0.30,
                "R&B": 0.15,
                "Electronic / Dance": 0.05,
                "Rock": 0.03,
                "Other": 0.02
            },
            "Brazil": {
                "Latin": 0.40,
                "Brazilian": 0.35,
                "Pop": 0.15,
                "Hip Hop / Rap": 0.08,
                "Electronic / Dance": 0.02
            },
            "Japan": {
                "J-Pop": 0.50,
                "Pop": 0.25,
                "Electronic / Dance": 0.15,
                "Rock": 0.05,
                "Other": 0.05
            },
            "South Korea": {
                "K-Pop": 0.60,
                "Pop": 0.25,
                "Hip Hop / Rap": 0.10,
                "Electronic / Dance": 0.05
            },
            "Mexico": {
                "Latin": 0.55,
                "Pop": 0.25,
                "Hip Hop / Rap": 0.15,
                "Electronic / Dance": 0.05
            },
            "Germany": {
                "Pop": 0.40,
                "Electronic / Dance": 0.25,
                "Hip Hop / Rap": 0.20,
                "Rock": 0.10,
                "Other": 0.05
            },
            "France": {
                "Pop": 0.45,
                "Hip Hop / Rap": 0.25,
                "Electronic / Dance": 0.15,
                "Rock": 0.10,
                "Other": 0.05
            },
            "United Kingdom": {
                "Pop": 0.40,
                "Hip Hop / Rap": 0.30,
                "Electronic / Dance": 0.15,
                "Rock": 0.10,
                "Other": 0.05
            },
            "India": {
                "South Asian": 0.40,
                "Pop": 0.30,
                "Hip Hop / Rap": 0.15,
                "Electronic / Dance": 0.10,
                "Other": 0.05
            }
        };

        const colorMap = {
            "Other": "lightgrey",
            "Pop": "gold",
            "Hip Hop / Rap": "deepskyblue",
            "Latin": "red",
            "Electronic / Dance": "purple",
            "R&B": "orange",
            "Rock": "darkred",
            "Indie / Alternative": "green",
            "Brazilian": "yellowgreen",
            "K-Pop": "pink",
            "J-Pop": "magenta",
            "South Asian": "brown"
        };

        function updateChart(selectedCountry) {
            const countryData = data[selectedCountry] || data["Global Average"];
            const traces = [];
            
            Object.keys(countryData).forEach(genre => {
                traces.push({
                    x: [countryData[genre]],
                    y: [selectedCountry],
                    name: genre,
                    type: 'bar',
                    orientation: 'h',
                    marker: { color: colorMap[genre] },
                    hovertemplate: '<b>' + genre + '</b>: %{x:.1%}<extra></extra>'
                });
            });

            const layout = {
                title: {
                    text: `Top 50 Genre Share: ${selectedCountry}`,
                    font: { size: 18, color: '#2c3e50' }
                },
                xaxis: {
                    ticksuffix: '%',
                    range: [0, 1],
                    title: 'Percentage of Top 50 Songs',
                    gridcolor: '#e9ecef'
                },
                yaxis: {
                    showticklabels: false,
                    title: ''
                },
                legend: { 
                    title: { text: 'Meta-Genre' },
                    orientation: 'v',
                    x: 1.02,
                    y: 1
                },
                font: { family: 'Arial', size: 12 },
                margin: { l: 50, r: 50, t: 80, b: 50 },
                height: 500,
                barmode: 'stack',
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('chart-container', traces, layout, {responsive: true});
        }

        // 初始化
        updateChart('Global Average');

        // 国家列表点击事件
        document.querySelectorAll('.country-item').forEach(item => {
            item.addEventListener('click', function() {
                // 移除所有active类
                document.querySelectorAll('.country-item').forEach(el => el.classList.remove('active'));
                // 添加active类到当前项
                this.classList.add('active');
                // 更新图表
                updateChart(this.getAttribute('data-country'));
            });
        });
    </script>
</body>
</html>
